﻿<!-- 
        Author: Sathish Thangaraj
        Description: Product list for Admin and Customer
-->
<!Doctype html>
<html lang="en">

    <head>
        <title>snsafe home screen</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="asset/materialize-css/css/materialize.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="asset/css/style.css">
        <!--<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">-->
        <link rel="stylesheet" href="asset/bootstrap/css/bootstrap.min.css">
        <!-- data table css -->
        <link rel="stylesheet" href="asset/plugins/jquery-datatable/skin/bootstrap/css/dataTables.bootstrap.css">
        <link rel="stylesheet" href="asset/css/dataTables.responsive.css">
        <link rel="stylesheet" href="asset/css/sweetalert.css">
        <link rel="stylesheet" href="asset/css/fancybox.css">
        <link rel="stylesheet" href="asset/css/lumos.css">

        <style>
            html {
                height: 100vh;
            }

            td a:nth-child(2) {
                display: none;
            }

            button#quickadd,
            button#Addvideo {
                margin-left: 16px;
                /* margin-left: 45%; */
                margin-top: -8px;
                width: 48px;
                height: 48px;
                font-size: 0px;
                border-radius: 50%;
                right: 75px;
            }

            div#videoModal {
                background: #116ca2;
            }

            .fixed-action-btn {
                top: 70px;
            }

            span {
                color: #fff;
            }

            .fixed-action-btn.horizontal {
                position: initial !important;
            }

            .fixed-action-btn.horizontal ul {
                right: 0px !important;
            }

            span.a_v,
            .q_a {
                position: relative;
                right: 68px;
                bottom: 20px;
            }

            span#UploadImgs img {
                margin: 5px !important;
            }

            #videoArea video {
                width: 260px;
                height: 170px;
            }
        </style>
        <script type="text/javascript" charset="utf-8">
            var pictureSource; // picture source
            var destinationType; // sets the format of returned value 

            // Wait for Cordova to connect with the device
            //
            document.addEventListener("deviceready", onDeviceReady, false);

            // Cordova is ready to be used!
            //
            function onDeviceReady() {
                pictureSource = navigator.camera.PictureSourceType;
                destinationType = navigator.camera.DestinationType;
            }

            // Called when a photo is successfully retrieved
            //
            function onPhotoDataSuccess(imageData) {
                // Uncomment to view the base64 encoded image data
                // console.log(imageData);

                // Get image handle
                //                alert(imageData);
                //
                //                var smallImage = document.getElementById('smallImage');
                storefunction(imageData);
                // 
                // Unhide image elements
                //
                //                smallImage.style.display = 'block';
                //
                //                // Show the captured photo
                //                // The inline CSS rules are used to resize the image
                //                //
                //                smallImage.src = "data:image/jpeg;base64," + imageData;
            }

            // Called when a photo is successfully retrieved
            //
            function onPhotoURISuccess(imageURI) {
                // Uncomment to view the image file URI 
                // console.log(imageURI);

                // Get image handle
                //
                var largeImage = document.getElementById('largeImage');

                // Unhide image elements
                //
                largeImage.style.display = 'block';

                // Show the captured photo
                // The inline CSS rules are used to resize the image
                //
                largeImage.src = imageURI;
            }

            // A button will call this function
            //
            function capturePhoto() {
                $('#userFiles').val(''); //epmty gallery images
                // Take picture using device camera and retrieve image as base64-encoded string
                navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
                    quality: 50,
                    destinationType: destinationType.DATA_URL
                });
            }

            // A button will call this function
            //
            function capturePhotoEdit() {

                // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
                navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
                    quality: 20,
                    allowEdit: true,
                    destinationType: destinationType.DATA_URL
                });
            }

            // A button will call this function
            //
            function getPhoto(source) {
                // Retrieve image file location from specified source
                navigator.camera.getPicture(onPhotoURISuccess, onFail, {
                    quality: 50,
                    destinationType: destinationType.FILE_URI,
                    sourceType: source
                });
            }

            // Called if something bad happens.
            // 
            function onFail(message) {
                alert('Failed because: ' + message);
            }

            // video recorder
            document.addEventListener("deviceready", init, false);

            function init() {


                document.querySelector("#takeVideo").addEventListener("touchend", function () {
                    console.log("Take video");
                    navigator.device.capture.captureVideo(captureSuccess, captureError, {
                        limit: 1
                    });
                }, false);

            }

            function captureError(e) {
                console.log("capture error: " + JSON.stringify(e));
            }

            function captureSuccess(s) {
                console.log("Success");
                console.dir(s[0]);
                var v = "<video controls='controls'>";
                v += "<source src='" + s[0].fullPath + "' type='video/mp4'>";
                v += "</video>";
                document.querySelector("#videoArea").innerHTML = v;
                console.log(s[0].fullPath);
                document.getElementById("videoSource").value = s[0].fullPath;
               // document.getElementById("videoSource").name = s[0].fullPath;
                console.log(s[0].name);
                $('#videoSource').val(s[0].name);
                // $('#videoSource').append('value="' + s[0].fullPath + '"');
                

            }
        </script>
    </head>

    <body class="product-page">
        <div class="">
            <div class="col s12 navbar-fixed nav">
                <nav>
                    <div class="nav-wrapper">
                        <ul id="slide-out" class="side-nav">
                            <li>
                                <div class="user-view">
                                    <div class="user-profile">
                                        <img class="circle" src="asset/images/profile.png">
                                        <div class="user-detail">
                                            <h4 class="white-text" id="ses_name">John Doe</h4>
                                            <p class="white-text" id="ses_mail">jonedoe@test.com</p>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <hr>
                            <!-- <li><a href="#!"><i class="material-icons">cloud</i>First Link With Icon</a></li>
                                <li><a href="#!">Second Link</a></li>
                                <li>
                                    <div class="divider"></div>
                                </li>
                                <li><a class="subheader">Subheader</a></li>
                                <li><a class="waves-effect" href="#!">Third Link With Waves</a></li> -->
                            <div class="nav-links">
                                <a href="profile.html" class="white-text">
                                    <img class="navimg" src="asset/images/user.png" alt="">
                                    <span class="navtitle">Profile</span>
                                </a>
                                <a href="product.html" class="white-text">
                                    <img class="navimg" src="asset/images/product.png" alt="">
                                    <span class="navtitle">Product List</span>
                                </a>
                                <a href="product_draft.html" class="white-text">
                                    <img class="navimg" src="asset/images/product.png" alt="">
                                    <span class="navtitle">Product Draft</span>
                                </a>
                                <!-- <a href="device.html" class="white-text"><img class="navimg" src="asset/images/device.png" alt=""><span class="navtitle">Devices</span></a> -->
                                <a href="finder.html" class="white-text">
                                    <img class="navimg" src="asset/images/device.png" alt="">
                                    <span class="navtitle">Lost and Found</span>
                                </a>
                                <a href="recycle.html" class="white-text">
                                    <img class="navimg" src="asset/images/recycle.png" alt="">
                                    <span class="navtitle">Recycle</span>
                                </a>
                                <a href="user.html" class="white-text" id="usernav">
                                    <img class="navimg" src="asset/images/user.png" alt="">
                                    <span class="navtitle">Users</span>
                                </a>
                                <a href="orders.html" class="white-text">
                                    <img class="navimg" src="asset/images/product.png" alt="">
                                    <span class="navtitle">Order(s)</span>
                                </a>
                                <a href="shop.html" class="white-text" id="shopnav">
                                    <img class="navimg" src="asset/images/product.png" alt="">
                                    <span class="navtitle">Shop</span>
                                </a>
                                <a href="tagsearch.html" class="white-text">
                                    <img class="navimg" src="asset/images/user.png" alt="">
                                    <span class="navtitle">Tag Search</span>
                                </a>
                            </div>

                            <hr>
                            <div class="nav-links">
                                <a href="" class="white-text">
                                    <img class="navimg" src="asset/images/product.png" alt="">
                                    <span class="navtitle">Settings</span>
                                </a>
                                <a href="#" class="white-text" onClick="return logout();">
                                    <img class="navimg" src="asset/images/device.png" alt="">
                                    <span class="navtitle">Logout</span>
                                </a>
                            </div>
                        </ul>
                        <a href="#" data-activates="slide-out" class="button-collapse">
                            <i class="material-icons">menu</i>
                        </a>
                        <div class="header">
                            <h2>Product List</h2>
                        </div>
                        <ul id="nav-mobile" class="left hide-on-med-and-down">
                            <li>
                                <a href="collapsible.html">
                                    <i class="fa fa-cart"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="se-pre-con"></div>
        <section class="content">
            <div class="container-fluid">
                <div class="row clearfix">

                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="card">
                            <div class="body">
                                <div class="fixed-action-btn horizontal">
                                    <a class="btn-floating btn-large btn-primary">
                                        <i class="large material-icons">add</i>
                                    </a>
                                    <ul>

                                        <li>
                                            <span class="a_v">Add Video</span>
                                            <br>
                                            <button type="button" class="btn btn-primary waves-effect " id="Addvideo" data-toggle="tooltip" data-placement="top" title="Add product">
                                                <span class="material-icons">video_library</span>
                                            </button>
                                        </li>
                                        <li>
                                            <span class="q_a">Quick Add</span>
                                            <br>
                                            <button type="button" class="btn btn-primary waves-effect " id="quickadd" data-toggle="tooltip" data-placement="top" title="Add product">
                                                <span class="material-icons">photo_library</span>
                                            </button>
                                        </li>
                                    </ul>
                                    <br>
                                    <br>
                                </div>

                                <div class="clearfix"></div>
                                <table id="table" class="table table-bordered table-striped table-hover dataTable" style="width:100%;">
                                    <thead>
                                        <tr>
                                            <th>S.No</th>
                                            <th>Product Image</th>
                                            <th>Receipt</th>
                                            <th>Image Gallery</th>
                                            <th>product Group</th>
                                            <th>Product Brand</th>
                                            <th>Product Model</th>
                                            <th>Product serial Number</th>
                                            <th>Used Type</th>
                                            <th>Buying price</th>
                                            <th>Bought</th>
                                            <th>Product Status</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                                <div class="col-sm-9"></div>
                                <button type="button" class="btn btn-primary waves-effect " id="AddProduct" data-toggle="tooltip" data-placement="top" title="Add product">
                                    <span class="material-icons">add</span>
                                </button>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- model start-->
        <div class="modal fade in" id="defaultModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form id="productForm" autocomplete="off">
                        <div class="modal-header">
                            <h4 class="modal-title" id="defaultModalLabel">Add product</h4>
                        </div>
                        <div class="modal-body">
                            <br/>
                            <br/>
                            <!--                    <?php
                                                    if ($this->logged_type == "customer") {
                                                        ?>-->
                            <div class="customer">
                                <input type="hidden" value="" id="user_id" name="user_id" />
                            </div>
                            <!--                        <?php
                                                    } else {
                                                        ?>-->
                            <div class="form-group admin">
                                <label class="form-label">User *</label>
                                <div class="form-line">
                                    <select name="user_id" id="user_id" class="form-control show-tick browser-default">
                                        <option>Select user</option>
                                    </select>

                                </div>
                            </div>
                            <!--                        <?php
                                                    }
                                                    ?>-->
                            <div class="form-group q">
                                <label class="form-label z-index">Product group*</label>
                                <div class="form-line setFocus">
                                    <select name="sel_p_group" id="sel_p_group" class="form-control show-tick browser-default">
                                        <option>Select product group </option>
                                        <option value="new_grp">New group </option>
                                    </select>

                                </div>
                            </div>
                            <div class="form-group  hideme">
                                <div class="form-line focused">
                                    <input type="hidden" value="" id="id" name="id" />
                                    <input type="hidden" value="" id="updateV" name="updateV" />
                                    <input type="text" class="form-control validate" name="productGroup" id="productGroup" placeholder="Enter product group *">
                                    <!--<label class="form-label"><?php echo $this->lang->line('product_group'); ?>&nbsp;*</label>-->
                                </div>
                            </div>
                            <div class="form-group form-float q">
                                <div class="form-line input-field">
                                    <input type="text" class="form-control validate" name="brand" id="brand">
                                    <label class="form-label">Product brand*</label>
                                </div>
                            </div>
                            <div class="form-group form-float q">
                                <div class="form-line input-field">
                                    <input type="text" class="form-control validate" name="model" id="model">
                                    <label class="form-label">Product model *</label>
                                </div>
                            </div>
                            <div class="form-group form-float">
                                <div class="form-line input-field">
                                    <input type="text" class="form-control validate" name="snNumber" id="snNumber">
                                    <label class="form-label">Product serial number *</label>
                                    <p id="userErr"></p>
                                </div>
                            </div>
                            <div class="form-group form-float q">
                                <div class="form-line input-field">
                                    <input type="text" class="form-control validate" id="altModelNo" name="altModelNo">
                                    <label class="form-label">Alternative model number</label>
                                </div>
                            </div>
                            <div class="form-group form-float q">
                                <div class="form-line input-field">
                                    <input type="text" name="description" id="description" class="form-control validate">
                                    <label class="form-label">Description</label>
                                </div>
                            </div>
                            <div class="form-group form-float keyword">
                                <div class="form-line input-field">
                                    <input type="text" name="keyword" id="keyword" class="form-control validate">
                                    <label class="form-label">Keywords</label>
                                </div>
                            </div>
                            <div class="form-group form-float hide">
                                <div class="form-line input-field">
                                    <input type="text" name="giftdescription" id="gift_description">
                                    <label class="form-label">Gift description</label>
                                </div>
                            </div>
                            <div class="form-group form-float q">
                                <div class='input-group form-line date input-field'>
                                    <input type='text' class="datepicker form-control" id="dateBought" name="dateBought" style="background:transparent !important"
                                           />
                                    <i class="material-icons">date_range</i>
                                    <!--                                    <span class="input-group-addon">
                                                                                <span class="glyphicon glyphicon-calendar date_bought"></span>-->

                                    <label class="form-label z-index">Date bought*</label>
                                </div>
                            </div>
                            <div class="form-group form-float q">
                                <div class='input-group form-line date input-field' id="warenty_date">
                                    <input type="text" class="form-control datepicker " id="warrantyExpires" name="warrantyExpires" style="background:transparent !important"
                                           />
                                    <i class="material-icons">date_range</i>
                                    <!--                                    <span class="input-group-addon">
                                                                                <span class="glyphicon glyphicon-calendar warranty_date"></span>
                                                                            </span>-->
                                    <label class="form-label z-index">warranty expires</label>
                                </div>
                            </div>
                            <div class="form-group q">
                                <label class="form-label"> Used type</label>
                                <div class="form-line input-field setFocus">
                                    <select name="usedType" id="usedType" class="form-control validate show-tick browser-default">
                                        <option value="">used type</option>
                                        <option value="new">new</option>
                                        <option value="used">used</option>
                                    </select>

                                </div>
                            </div>
                            <div class="form-group form-float q">
                                <div class="form-line input-field">
                                    <input type="text" class="form-control validate" id="buyingPrice" name="buyingPrice">
                                    <label class="form-label">buying price</label>
                                </div>
                            </div>
                            <div class="form-group form-float q">
                                <div class="form-line input-field">
                                    <input type="text" class="form-control validate" id="whereBought" name="whereBought" />
                                    <label class="form-label">Where bought</label>
                                </div>
                            </div>
                            <div class="form-group form-float">
                                <div class="file_input_div ">
                                    <div class="file_input">
                                        <label class="form-label p_img">Upload Product images</label>
                                        <label>
                                            <input class="none" name="userFiles[]" id="userFiles" type="file" multiple="">
                                            <!--<button type="button" class="upload_file">Upload</button> &nbsp;<button type="button" class="take_pic">Take picture</button>-->
                                            <i class="material-icons icon_upload" style="">photo_library</i>&nbsp;&nbsp;
                                        </label>
                                        &nbsp;&nbsp;
                                        <i class="material-icons camera" onclick="capturePhoto();">photo_camera</i>
                                        <br>

                                    </div>

                                    <span id="UploadImgs"></span>

                                </div>
                                <br>
                            </div>


                            <div class="form-group form-float q">
                                <div class="file_input_div ">
                                    <div class="file_input">
                                        <label class="form-label">Upload product receipt</label>&nbsp;
                                        <label>
                                            <i class="material-icons icon_upload" style="">image</i>
                                            <input class="none" name="photo" id="photo" type="file" />
                                        </label>
                                        <span id="UploadImg"></span>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <!--<div class="row clearfix">-->
                            <div class="form-group form-float q">
                                <div class="demo-checkbox">
                                    <input name="secure" type="checkbox" id="secure" class="chk-col-green delAddress" value="true">
                                    <label for="secure">
                                        <p>Want to make product private?</p>
                                    </label>

                                </div>
                            </div>
                            <input type="hidden" name="verify_product" type="checkbox" id="verify_product" value="1">
                        </div>
                        <div class="modal-footer">
                            <button type="submit" id="submitProduct" class="btn btn-success waves-effect">
                                <span class="material-icons">check</span>
                            </button>
                            &nbsp;&nbsp;
                            <button type="button" class="btn btn-danger waves-effect" data-dismiss="modal">
                                <span class="material-icons">clear</span>
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
        <!-- model end-->
        <div class="modal fade" id="videoModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form id="videoForm" autocomplete="off">
                        <div class="modal-header">
                            <h4 class="modal-title" id="videoModalLabel">Add product Video</h4>
                        </div>
                        <div class="modal-body">
                            <br/>
                            <br/>
                            <div class="form-group admin">
                                <label class="form-label">User *</label>
                                <div class="form-line">
                                    <select name="v_user_id" id="v_user_id" class="form-control show-tick browser-default">
                                        <option>Select user</option>
                                    </select>

                                </div>
                            </div>

                            <div class="customer">
                                <input type="hidden" value="" id="v_user_id" name="v_user_id" />
                            </div>
                            <div class="form-group form-float">
                                <div class="file_input_div ">
                                    <div class="file_input">
                                        <label class="form-label">upload product video</label>&nbsp;
                                        <label>
                                            <i class="material-icons video_library">video_library</i>&nbsp;&nbsp;
                                            <input class="none" type="file" id="videoSource" name="pic" accept="video/*">
                                        </label>
                                        <i class="material-icons switch_video" id="takeVideo">switch_video</i>
                                        <span id="uploadvideo"></span>
                                        <div id="videoArea"></div>
                                    </div>
                                </div>

                            </div>
                            <br>


                        </div>
                        <div class="modal-footer">
                            <button type="submit" id="submitvideo" class="btn btn-success waves-effect">
                                <span class="material-icons">check</span>
                            </button>&nbsp;&nbsp;
                            <button type="button" class="btn btn-danger waves-effect" data-dismiss="modal">
                                <span class="material-icons">clear</span>
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
        <!-- model end-->
<!--        <div class="modal fade" id="videoModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form id="videoForm" autocomplete="off">
                        <div class="modal-header">
                            <h4 class="modal-title" id="videoModalLabel">Add product Video</h4>
                        </div>
                        <div class="modal-body">
                            <br/>
                            <br/>
                            <div class="form-group admin">
                                <label class="form-label">User *</label>
                                <div class="form-line">
                                    <select name="v_user_id" id="v_user_id" class="form-control show-tick browser-default">
                                        <option>Select user</option>
                                    </select>

                                </div>
                            </div>

                            <div class="customer">
                                <input type="hidden" value="" id="v_user_id" name="v_user_id" />
                            </div>
                            <div class="form-group form-float">
                                <div class="file_input_div ">
                                    <div class="file_input">
                                        <label class="form-label">upload product video</label>&nbsp;
                                        <label>
                                            <i class="material-icons video_library">video_library</i>&nbsp;&nbsp;
                                            <input class="none" type="file" name="pic" accept="video/*" id="video" onchange="readURL(this);">
                                        </label>
                                        <i class="material-icons switch_video" onclick="captureVideo();">switch_video</i>
                                        <span id="uploadvideo">
                                        </span>

                                    </div>
                                </div>

                            </div>
                            <video id="video1" controls autoplay>
                                <source src="" type="video/mp4" />
                            </video>
                            <br>


                        </div>
                        <div class="modal-footer">
                            <button type="submit" id="submitvideo" class="btn btn-success waves-effect">
                                <span class="material-icons">check</span>
                            </button>&nbsp;&nbsp;
                            <button type="button" class="btn btn-danger waves-effect" data-dismiss="modal">
                                <span class="material-icons">clear</span>
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </div>-->
        <!--product gallery modal-->
        <div class="modal fade in" id="galleryModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-header">
                    <button type="button" class="btn btn-danger waves-effect" data-dismiss="modal">
                        <span class="material-icons">clear</span>
                    </button>
                </div>


                <div class="modal-body">
                    <span id="productViewGallery"></span>
                </div>


            </div>
        </div>
        <div class="modal fade in" id="desModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form id="productdesForm" autocomplete="off">
                        <div class="modal-header">
                            <h4 class="modal-title" id="defaultModalLabel1">Reward for finder</h4>
                        </div>
                        <br>
                        <div class="modal-body">
                            <div class="form-group form-float">
                                <div class="form-line input-field">
                                    <input type="hidden" class="form-control" name="append_id" id="append_id">
                                    <!--<textarea name="description" id="prodes" cols="30" rows="5" class="form-control no-resize"></textarea>-->
                                    <input type="text" class="form-control validate" id="missing_place" name="missing_place">
                                    <label class="form-label">Where did you lost it ?</label>
                                </div>
                            </div>
                            <div class="form-group form-float ">
                                <div class=" form-line input-field">

                                    <input type="text" class="form-control validate" id="reward" name="reward">
                                    <label class="form-label">Do you want to give any rewards to the finder ?</label>

                                </div>
                            </div>


                            <div class="form-group form-float">
                                <div class="form-line input-field">
                                    <input type="text" class="form-control validate" id="comments" name="comments">
                                    <label class="form-label">Any other comments</label>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" id="Productdes" class="btn btn-primary waves-effect">submit</button>
                            <button type="button" class="btn btn-danger waves-effect" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!--product transfer modal-->
        <div class="modal fade in" id="productTransfer" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-sm" role="document">
                <div class="modal-content">
                    <form id="producttransForm">
                        <div class="modal-header">
                            <h4 class="modal-title" id="defaultModalLabel2">Product Transfer</h4>
                        </div>
                        <div class="modal-body">
                            <br/>
                            <input type="hidden" id="product_id" name="product_id">
                            <input type="hidden" id="p_user_id" name="p_user_id">
                            <label>From :
                                <span id="sn_tag"></span>
                            </label>
                            <br>
                            <br>
                            <div class="form-group ">
                                <div class="form-line" id="transproduct">
                                    <label>To </label>
                                    <select name="transfter_id" id="transfter_id" class="form-control browser-default">
                                        <!--<option>Select Used type</option>-->
                                    </select>

                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" id="transfer_product" class="btn btn-primary waves-effect">submit</button>
                                <button type="button" class="btn btn-danger waves-effect" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="gallery hidden"></div>
        <!--          <button onclick="capturePhoto();">Capture Photo</button> <br>-->
        <!--<button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br>-->
        <!--        <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
                    <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>-->
        <script type="text/javascript" src="asset/js/jquery-3.2.1.min.js"></script>
        <script type="text/javascript" src="https://rawgit.com/carlo/jquery-base64/master/jquery.base64.min.js"></script>

        <script type="text/javascript" src="asset/materialize-css/js/materialize.min.js"></script>
        <script type="text/javascript" src="asset/bootstrap/js/bootstrap.min.js"></script>
        <!-- Jquery data table plugin-->
        <script type="text/javascript" src="asset/plugins/jquery-datatable/jquery.dataTables.js"></script>
        <script type="text/javascript" src="asset/plugins/jquery-datatable/skin/bootstrap/js/dataTables.bootstrap.js"></script>
        <script type="text/javascript" src="asset/js/dataTables.responsive.js"></script>
        <script type="text/javascript" src="asset/js/jquery_validation.js"></script>
        <script type="text/javascript" src="asset/js/sweet_alert.min.js"></script>
        <script type="text/javascript" src="asset/js/sweetalert_dev.js"></script>
        <script type="text/javascript" src="asset/js/global.js"></script>
        <script type="text/javascript" src="asset/js/fancybox.js"></script>
        <script type="text/javascript" src="asset/js/lumos.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>

        <script>
                                         
                                            var images = [];

                                            function storefunction(img) {
                                                images.push(img);
                                                $('#UploadImgs').empty();
                                                $.each(images, function (ind, row) {
                                                    $('#UploadImgs').append('<img src="data:image/jpeg;base64,' + row +
                                                            '" width="100" height="100" />');
                                                });
                                            }
                                            $(window).on('load', function () {
                                                // Animate loader off screen
                                                $(".se-pre-con").delay(3000).show().fadeOut("slow");
                                            });
                                            //side nav bar initialization (never remove this)
                                            $(".button-collapse").sideNav();
                                            var productGroupID;
                                            //            $('.date_bought').click(function () {
                                            //                //alert('clicked');
                                            //                $('#dateBought').pickadate('show');
                                            //            });
                                            //            $('.warranty_date').click(function () {
                                            //                //alert('clicked');
                                            //                $('#warrantyExpires').pickadate('show');
                                            //            });
                                            $('#dateBought').pickadate({
                                                selectMonths: true, // Creates a dropdown to control month
                                                selectYears: 150,
                                                autoclose: true,
                                                closeOnClear: true,
                                                closeOnSelect: true,
                                                //format: 'd-m-Y',
                                                mask: '39-19-9999',
                                                format: 'dd-mm-yyyy',
                                                timepicker: false,
                                                // mask:true,
                                                max: true,
                                                noSpinbtn: true,
                                                scrollMonth: false,
                                                scrollInput: false,
                                                futureDate: false,
                                                onClose: function (date) {
                                                    var date1 = $('#dateBought').pickadate().pickadate('picker');
                                                    var date = new Date(Date.parse(date1.get()));
                                                    console.log(date);
                                                    date.setDate(date.getDate() + 1);
                                                    var newDate = date.toDateString();
                                                    newDate = new Date(Date.parse(newDate));
                                                    $('#warrantyExpires').pickadate('picker').set('min', newDate);

                                                },
                                                onSet: function () {
                                                    setTimeout(this.close, 0);
                                                }
                                            });
                                            $('#warrantyExpires').pickadate({
                                                //                               
                                                selectMonths: true, // Creates a dropdown to control month
                                                selectYears: 150,
                                                autoclose: true,
                                                closeOnSelect: true,
                                                closeOnClear: true,
                                                //format: 'd-m-Y',
                                                mask: '39-19-9999',
                                                timepicker: false,
                                                format: 'dd-mm-yyyy',
                                                //min: true,
                                                noSpinbtn: true,
                                                scrollMonth: false,
                                                scrollInput: false,
                                                futureDate: false,
                                                onSet: function () {
                                                    setTimeout(this.close, 0);
                                                }
                                            });
                                            /*-------datepicker-----*/
                                            $('.datepicker').pickadate({
                                                selectMonths: true, // Creates a dropdown to control month
                                                selectYears: 200, // Creates a dropdown of 15 years to control year,
                                                futureDate: false,
                                                today: 'Today',
                                                clear: 'Clear',
                                                close: 'Ok',
                                                closeOnClear: true,
                                                closeOnSelect: true // Close upon selecting a date,
                                            });
                                            $(document).ready(function () {
                                                $('select').material_select();
                                                getProductgroup();
                                                getUserData();
                                                // alert($this - > session - > userdata('logged') - > username; );
                                                //  $('#usedType,#user_id,#sel_p_group').selectpicker('refresh');

                                                /*   var sn_gen;
                                                 if (logged_type === 'admin') {
                                                 getSelectUser();
                                                 }*/
                                                getSelectUser();
                                                //Upload product images preview
                                                $('#userFiles').change(function () {
                                                    $('#UploadImgs').empty();
                                                    imagesPreview(this, '#UploadImgs');
                                                });
                                                //Upload receipt image preview
                                                $('#photo').change(function () {
                                                    $('#UploadImg').empty();
                                                    imagesPreview(this, '#UploadImg');
                                                });
                                                //upload video preview
                                                $('#photo').change(function () {
                                                    $('#UploadImg').empty();
                                                    imagesPreview(this, '#UploadImg');
                                                });
                                                $('#AddProduct').click(function () {
                                                    $('.p_img').show();
                                                    $('.upload_file').hide();
                                                    $('.take_pic').hide();
                                                    $('.icon_upload').show();
                                                    $('.keyword').addClass('hide');
                                                    // $('#user_id,#usedType,#sel_p_group').selectpicker('refresh');
                                                    $('.q').removeClass('hide');
                                                    $('.camera').addClass('hide');
                                                    $('.hideme').hide();
                                                    $('#id').val('');
                                                    $('#updateV').val('');
                                                    $('#user_id option').attr('disabled', false);
                                                    $('#user_id option').attr("selected", false);
                                                    $('#userErr').empty(); // SN number error message clear
                                                    $('#defaultModalLabel').text('Add product'); // Model popup title set
                                                    var vali = $('#productForm').validate();
                                                    vali.resetForm(); //Form all field validation reset
                                                    $('#UploadImgs,#UploadImg').empty();
                                                    $('#productForm')[0].reset(); //Form all field reset
                                                    //checkInput();
                                                    $('#defaultModal').modal('show'); // Model form show
                                                    $("#defaultModal").on('shown.bs.modal', function () {
                                                        $(this).find('#productGroup').focus();
                                                    });
                                                    $('#productGroup').focus();
                                                    $(".error").removeClass("error");
                                                });
                                                //Data table load product list
                                                //                                        table = $('#table').DataTable({
                                                //                                            dom: '<"pull-left"f><"pull-right"l>trip',
                                                //                                            responsive: true,
                                                //                                            processing: true,
                                                //                                            serverSide: true,
                                                //                                            //order: [[1, 'asc']],
                                                //                                            info: false,
                                                //                                            "columnDefs": [{
                                                //                                                    //"searchable": false,
                                                //                                                    // "orderable": false,
                                                //                                                    "targets": 0
                                                //                                                }],
                                                //                                            ajax: {
                                                //                                                url: 'http://rayi.in/snsafe/dev/Product/getProduct',
                                                //                                                type: 'POST',
                                                //                                                dataType: 'json'
                                                //                                            },
                                                //                                            "order": [[1, 'asc']],
                                                //                                        });
                                                //
                                                //                                        table.on('order.dt search.dt', function () {
                                                //                                            table.column(0, {search: 'applied', order: 'applied'}).nodes().each(function (cell, i) {
                                                //                                                cell.innerHTML = i + 1;
                                                //                                            });
                                                //                                        }).draw();

                                                var table = $('#table').DataTable({
                                                    ajax: {
                                                        url: 'http://rayi.in/snsafe/dev/mobileapi/Product/getProduct',
                                                        type: 'POST',
                                                        dataType: 'json'
                                                    },
                                                    "columnDefs": [{
                                                            "searchable": false,
                                                            "orderable": false,
                                                            "targets": 0
                                                        }],
                                                    dom: '<"pull-left"f><"pull-right"l>trip',
                                                    responsive: true,
                                                    processing: true,
                                                    info: false,
                                                    lengthChange: false,
                                                    // serverSide: true,
                                                    //"order": [[1, 'asc']]
                                                });

                                                table.on('order.dt search.dt', function () {
                                                    table.column(0, {
                                                        search: 'applied',
                                                        order: 'applied'
                                                    }).nodes().each(function (cell, i) {
                                                        cell.innerHTML = i + 1;
                                                    });
                                                }).draw();
                                            });
                                            //Add Product from validation
                                            $('#productForm').validate({
                                                rules: {
                                                    user_id: {
                                                        required: true
                                                    },
                                                    sel_p_group: {
                                                        required: true
                                                    },
                                                    productGroup: {
                                                        required: true
                                                    },
                                                    brand: {
                                                        required: true
                                                    },
                                                    model: {
                                                        required: true
                                                    },
                                                    snNumber: {
                                                        required: true
                                                    },
                                                    dateBought: {
                                                        required: true
                                                    },
                                                    buyingPrice: {
                                                        number: true
                                                    },
                                                    userFiles: {
                                                        required: true
                                                    }
                                                },
                                                highlight: function (input) {
                                                    $(input).parents('.form-line').addClass('error');
                                                },
                                                unhighlight: function (input) {
                                                    $(input).parents('.form-line').removeClass('error');
                                                },
                                                errorPlacement: function (error, element) {
                                                    $(element).parents('.form-group').append(error);
                                                },
                                                messages: {
                                                    user_id: {
                                                        required: 'Select user'
                                                    },
                                                    sel_p_group: {
                                                        required: 'Select product group'
                                                    },
                                                    productGroup: {
                                                        required: 'Please enter your product group'
                                                    },
                                                    brand: {
                                                        required: 'Please enter your product brand'
                                                    },
                                                    model: {
                                                        required: 'Please enter your product model'
                                                    },
                                                    snNumber: {
                                                        required: 'Please enter your product serial number'
                                                    },
                                                    dateBought: {
                                                        required: 'Please choose a bought date'
                                                    },
                                                    buyingPrice: {
                                                        number: 'Provide number only'
                                                    },
                                                    userFiles: {
                                                        required: 'please upload image'
                                                    }
                                                },
                                                submitHandler: function () {
                                                    $('#submitProduct').prop('disabled', true);
                                                    if ($('#updateV').val() === 'update') {
                                                        update();
                                                    } else if ($('#quickadd').val() === 'quickadd') {
                                                        console.log($('#UploadImgs').html());
                                                        if ($('#UploadImgs').html() === '') {
                                                            alert('Please upload a product image');
                                                        } else {
                                                            $('#submitProduct').prop('enabled', true);
                                                            $('#submitProduct').prop('disabled', false);
                                                            quickadd();
                                                        }
                                                    } else {
                                                        addproduct();
                                                    }
                                                }
                                            });
                                            // Product transfer form validation
                                            $('#producttransForm').validate({
                                                rules: {
                                                    transfter_id: {
                                                        required: true
                                                    }
                                                },
                                                messages: {
                                                    transfter_id: {
                                                        required: 'Select SN tag number'
                                                    }
                                                },
                                                submitHandler: function () {

                                                    addTransfer();
                                                }
                                            });
                                            var imagesPreview = function (input, placeToInsertImagePreview) {
                                                if (input.files) {
                                                    var filesAmount = input.files.length;
                                                    for (i = 0; i < filesAmount; i++) {
                                                        var reader = new FileReader();
                                                        var filesize = input.files[i].size;
                                                        if (filesize < 5242880) {
                                                            reader.onload = function (event) {
                                                                $($.parseHTML('<img with="40" height="40">')).attr('src', event.target.result).appendTo(
                                                                        placeToInsertImagePreview);
                                                            }
                                                            reader.readAsDataURL(input.files[i]);
                                                        } else {
                                                            swal('Image upload', 'File size should not be more than 5 MB', 'error');
                                                        }
                                                    }
                                                }
                                            };
                                            //Product add 
                                            function addproduct() {

                                                // $('#UploadImgs,#UploadImg').empty();
                                                var formdata = new FormData($('#productForm')[0]);
                                                getProductgroup();
                                                $.ajax({
                                                    url: 'http://rayi.in/snsafe/dev/product/addProduct',
                                                    type: "POST",
                                                    data: formdata,
                                                    contentType: false,
                                                    processData: false,
                                                    dataType: "JSON",
                                                    beforeSend: function () {
                                                        $('#block').show();
                                                        $('#submitProduct').prop('disabled', true);
                                                    },
                                                    success: function (rs) {
                                                        if (rs.status === true) {
                                                            $('#productForm')[0].reset();
                                                            $('#submitProduct').prop('disabled', false);
                                                            $('#defaultModal').modal('hide');
                                                            //ajax_dataTable_reload();
                                                            //table.ajax.reload();
                                                            //swal('Product added successfully', '', 'success');
                                                            //window.location.href = "product.html";
                                                            swal({
                                                                title: "Product added successfully!",
                                                                text: "",
                                                                type: "success"
                                                            }, function () {
                                                                window.location.href = "product.html";
                                                            });
                                                        }
                                                    },
                                                    error: function () {
                                                        swal('Add product', 'Error an add product', 'error');
                                                    },
                                                    complete: function () {
                                                        $('#block').hide();
                                                        $('#submitProduct').prop('disabled', false);
                                                    }
                                                });
                                            }
                                            //Product Update
                                            function update() {

                                                var url = "http://rayi.in/snsafe/dev/Product/productUpdate";
                                                var formData = new FormData($('#productForm')[0]);
                                                $.ajax({
                                                    url: url,
                                                    type: "POST",
                                                    data: formData,
                                                    contentType: false,
                                                    processData: false,
                                                    dataType: "JSON",
                                                    beforeSend: function () {
                                                        $('#block').show();
                                                        $('#submitProduct').prop('disabled', true);
                                                    },
                                                    success: function (rs) {
                                                        if (rs.status === true) {
                                                            $('#defaultModal').modal('hide');
                                                            $('#submitProduct').prop('disabled', false);
                                                            //ajax_dataTable_reload();
                                                            //table.ajax.reload();
                                                            getProductgroup();
                                                            // swal('Product updated successfully', '', 'success');
                                                            // window.location.href = "product.html";
                                                            swal({
                                                                title: "Product updated successfully!",
                                                                text: "",
                                                                type: "success"
                                                            }, function () {
                                                                window.location.href = "product.html";
                                                            });
                                                        }
                                                    },
                                                    error: function () {
                                                        swal('Product update', 'Error an update a product', 'error');
                                                    },
                                                    complete: function () {
                                                        $('#block').hide();
                                                        $('#submitProduct').prop('disabled', false);
                                                    }
                                                });
                                            }
                                            //Delete product
                                            function product_status(id, status) {
                                                if (status === 'recycle') {
                                                    swal({
                                                        title: "Recycle",
                                                        text: "Are you sure want to delete an item?",
                                                        type: "warning",
                                                        showCancelButton: true,
                                                        confirmButtonColor: "#DD6B55",
                                                        confirmButtonText: "Yes",
                                                        cancelButtonText: "No",
                                                        closeOnConfirm: false,
                                                        closeOnCancel: false
                                                    },
                                                            function (isConfirm) {
                                                                if (isConfirm) {
                                                                    $.ajax({
                                                                        url: "http://rayi.in/snsafe/dev/product/product_status/" + id,
                                                                        type: "POST",
                                                                        data: {
                                                                            status: status
                                                                        },
                                                                        dataType: "JSON",
                                                                        success: function (data) {
                                                                            $('#defaultModal').modal('hide');
                                                                            // ajax_dataTable_reload();
                                                                            //table.ajax.reload();
                                                                            //swal('Deleted Successfully', 'Check your recycle bin', 'success');
                                                                            // window.location.href = "product.html";
                                                                            swal({
                                                                                title: "Deleted Successfully!",
                                                                                text: "Check your recycle bin",
                                                                                type: "success"
                                                                            }, function () {
                                                                                window.location.href = "product.html";
                                                                            });

                                                                        },
                                                                        error: function () {
                                                                            swal('Delete', 'Something error to delete a product', 'error');
                                                                        }
                                                                    });
                                                                } else {
                                                                    swal("Cancelled", "", "error");
                                                                }
                                                            });
                                                }
                                            }
                                            $('#Productdes').click(function () {
                                                var id = $('#append_id').val();
                                                var defaultValue;
                                                if ($('#md_checkbox_' + id).is(':checked')) {
                                                    defaultValue = '1';
                                                } else {
                                                    defaultValue = '0';
                                                }
                                                var mis_place = $('#missing_place').val();
                                                var reward = $('#reward').val();
                                                var comments = $('#comments').val();
                                                $.ajax({
                                                    url: "http://rayi.in/snsafe/dev/product/product_missing/" + id,
                                                    type: "POST",
                                                    data: {
                                                        status: defaultValue,
                                                        missing_place: mis_place,
                                                        reward: reward,
                                                        description: comments
                                                    },
                                                    dataType: "JSON",
                                                    success: function (data) {
                                                        $('#desModal').modal('hide');
                                                        $('#defaultModal').modal('hide');
                                                        //ajax_dataTable_reload();
                                                        //table.ajax.reload();
                                                        // swal('Marked successfully', '', 'success');
                                                        // window.location.href = "product.html";
                                                        swal({
                                                            title: "Marked successfully!",
                                                            text: "",
                                                            type: "success"
                                                        }, function () {
                                                            window.location.href = "product.html";
                                                        });

                                                    },
                                                    error: function () {
                                                        swal('Missing', 'Error to markiing', 'error');
                                                    }
                                                });
                                            });

                                            function randomString(length, chars) {
                                                var result = '';
                                                for (var i = length; i > 0; --i)
                                                    result += chars[Math.round(Math.random() * (chars.length - 1))];
                                                return result;
                                            }
                                            //Missing product
                                            function missing_product(id) {
                                                if ($('#md_checkbox_' + id).is(':checked')) {
                                                    missingYes(id);
                                                } else {
                                                    missingNo(id);
                                                }
                                            }

                                            function missingYes(id) {
                                                swal({
                                                    title: "Missing",
                                                    text: "Do you want to mark this product as Missing?",
                                                    type: "warning",
                                                    showCancelButton: true,
                                                    confirmButtonColor: "#DD6B55",
                                                    confirmButtonText: "Yes",
                                                    cancelButtonText: "No",
                                                    closeOnConfirm: true,
                                                    closeOnCancel: false
                                                },
                                                        function (isConfirm) {
                                                            if (isConfirm) {
                                                                if ($('#md_checkbox_' + id).is(':checked')) {
                                                                    $('#append_id').val(id);
                                                                    $('#prodes').val('');
                                                                    $('#desModal').modal('show');
                                                                    $('#productdesForm')[0].reset();
                                                                } else {
                                                                    $('#prodes').val('');
                                                                    $('#append_id').val(id);
                                                                }
                                                            } else {
                                                                swal("Cancelled", "", "error");
                                                                $('#md_checkbox_' + id).prop('checked', false);
                                                            }
                                                        });
                                            }

                                            function missingNo(id) {
                                                swal({
                                                    title: "Missing",
                                                    text: "Is this product found",
                                                    type: "warning",
                                                    showCancelButton: true,
                                                    confirmButtonColor: "#DD6B55",
                                                    confirmButtonText: "Yes",
                                                    cancelButtonText: "No",
                                                    closeOnConfirm: true,
                                                    closeOnCancel: false
                                                },
                                                        function (isConfirm) {
                                                            if (isConfirm) {
                                                                var defaultValue;
                                                                var des = '';
                                                                if ($('#md_checkbox_' + id).is(':checked')) {
                                                                    defaultValue = '1';
                                                                } else {
                                                                    defaultValue = '0';
                                                                }
                                                                $.ajax({
                                                                    url: "http://rayi.in/snsafe/dev/product/product_missing/" + id,
                                                                    type: "POST",
                                                                    data: {
                                                                        status: defaultValue,
                                                                        description: des
                                                                    },
                                                                    dataType: "JSON",
                                                                    success: function (data) {
                                                                        $('#desModal').modal('hide');
                                                                        $('#defaultModal').modal('hide');
                                                                        // ajax_dataTable_reload();
                                                                        //table.ajax.reload();
                                                                        // swal('Unmarked successfully', '', 'success');
                                                                        //window.location.href = "product.html";
                                                                        swal({
                                                                            title: "Unmarked successfully!",
                                                                            text: "",
                                                                            type: "success"
                                                                        }, function () {
                                                                            window.location.href = "product.html";
                                                                        });
                                                                    },
                                                                    error: function () {
                                                                        swal('Maked', 'Error an Unmarking', 'error');
                                                                    }
                                                                });
                                                            } else {
                                                                swal("cancelled", "", "error");
                                                                $('#md_checkbox_' + id).prop('checked', true);
                                                            }
                                                        });
                                            }
                                            //Edit product
                                            function edit_product(id) {
                                                //        getProductgroup();
                                                $('.p_img').show();
                                                $('.upload_file').hide();
                                                $('.take_pic').hide();
                                                $('.icon_upload').show();
                                                $('.keyword').addClass('hide');
                                                $('.q').removeClass('hide');
                                                $('.camera').addClass('hide');
                                                $('.hideme').hide();
                                                $('#defaultModalLabel').text('Edit Product');
                                                // $('#user_id,#usedType').selectpicker('refresh');
                                                var vali = $('#productForm').validate();
                                                vali.resetForm();
                                                $('#defaultModal').modal('show');
                                                $('#UploadImgs,#UploadImg').empty();
                                                $('#id').val(id);
                                                $('#userErr').empty().html('');
                                                $('#updateV').val('update');
                                                $('#submitProduct').attr("disabled", false);
                                                //        $('#snNumber').prop('readonly', true);
                                                $('#productForm')[0].reset();
                                                $('#user_id option').attr("selected", false);
                                                $(".error").removeClass("error");
                                                $.ajax({
                                                    url: "http://rayi.in/snsafe/dev/Product/editProduct/" + id,
                                                    type: "GET",
                                                    dataType: "JSON",
                                                    success: function (data) {
                                                        //                $('#user_id option').attr('disabled', 'disabled');
                                                        $('#user_id option[value=' + data[0][0].user_id + ']').prop('selected', true);
                                                        //                $('#user_id option[value=' + data[0][0].user_id + ']').attr('disabled', false);
                                                        $('#id').val(data[0][0].id);
                                                        //                $('#productGroup').val(data[0][0].product_group);
                                                        $('#brand').val(data[0][0].brand);
                                                        $('#model').val(data[0][0].model);
                                                        $('#snNumber').val(data[0][0].sn_number);
                                                        $('#altModelNo').val(data[0][0].alt_model_no);
                                                        $('#description').val(data[0][0].description);
                                                        $('#gift_description').val(data[0][0].gift_description);
                                                        $('#dateBought').val(data[0][0].date_bought);
                                                        $('#warrantyExpires').val(data[0][0].warranty_expires);
                                                        $('#usedType').val(data[0][0].used_type);
                                                        $('#buyingPrice').val(data[0][0].buying_price);
                                                        $('#whereBought').val(data[0][0].where_bought);
                                                        $('#product_status').val(data[0][0].missing_status);
                                                        $('#sel_p_group option[value="' + data[0][0].product_group + '"]').prop('selected',
                                                                true);
                                                        if (data[0][0].secure === '1') {
                                                            $('#secure').prop('checked', true);
                                                        } else {
                                                            $('#secure').prop('checked', false);
                                                        }
                                                        $('#UploadImg').empty().html('<img alt="" src="' + 'http://rayi.in/snsafe/dev/' + data[
                                                                0][0].receipt + '" width=40px height=40 />');
                                                        // $('#usedType,#user_id,#sel_p_group').selectpicker('refresh');
                                                        $('#UploadImgs').empty();
                                                        $.each(data['images'], function (ind, row) {
                                                            $('#UploadImgs').append('<img alt="" src="' + ' http://rayi.in/snsafe/dev/' +
                                                                    row.img_url + '" width=40px height=40 />')
                                                        });
                                                        checkInput();
                                                        $('label').addClass('active');
                                                    },
                                                    error: function () {
                                                        swal('Error', 'Error get data from ajax', 'error');
                                                    }
                                                });
                                            }
                                            //product Slider gallery 
                                            function gallery_product(id) {
                                                //                                                $('.hidden').empty();
                                                $('#productViewGallery').empty();
                                                $.ajax({
                                                    url: "http://rayi.in/snsafe/dev/Product/getGallery/" + id,
                                                    type: "GET",
                                                    dataType: "JSON",
                                                    success: function (data) {
                                                        $.each(data, function (ind, row) {
                                                            $('#productViewGallery').append('<img src="http://rayi.in/snsafe/dev/' +
                                                                    row.img_url + '" width="100%" />');
                                                            //                                                            $('#productViewGallery').append(' <div class="gallery-item"><a href="http://rayi.in/snsafe/dev/' + row.img_url + '" class="lumos-link" data-lumos=""></a></div>');
                                                        });
                                                        //                                                        $('.gallery a').trigger('click');
                                                        $('#galleryModal').modal('show');
                                                    },
                                                    error: function () {
                                                        swal('Error', 'Error get gallery image', 'error');
                                                    }
                                                });
                                            }
                                            $(".fancybox").attr('rel', 'gallery')
                                                    .fancybox({
                                                        padding: 0
                                                    });

                                            function getSelectUser() {
                                                $('select#user_id').empty().html('<option value="">Select user</option>');
                                                $('select#v_user_id').empty().html('<option value="">Select user</option>');
                                                $.ajax({
                                                    url: 'http://rayi.in/snsafe/dev/user/getUserList',
                                                    type: 'GET',
                                                    dataType: 'json',
                                                    success: function (rs) {
                                                        if (rs.status === true) {
                                                            $.each(rs.data, function (ind, row) {
                                                                $('select#user_id').append('<option value="' + row.id + '">' + row.username +
                                                                        '</option>');
                                                                $('select#v_user_id').append('<option value="' + row.id + '">' + row.username +
                                                                        '</option>');
                                                            });
                                                            // $('#user_id').selectpicker('refresh');
                                                        }
                                                    }
                                                });
                                            }

                                            function transfer(id, user_id, sn_tag) {
                                                // $('#transfter_id').selectpicker('refresh');
                                                var vali = $('#producttransForm').validate();
                                                vali.resetForm();
                                                $('#userErr').empty();
                                                $('#transproduct').addClass('focused');
                                                $('#product_id').val(id);
                                                $('#p_user_id').val(user_id);
                                                $('#sn_tag').text(sn_tag);
                                                $.ajax({
                                                    url: 'http://rayi.in/snsafe/dev/User/getSnTages',
                                                    type: 'GET',
                                                    dataType: 'json',
                                                    beforeSend: function () {
                                                        $('#block').show();
                                                    },
                                                    success: function (rs) {
                                                        if (rs.status === true) {
                                                            $('#transfter_id').empty().append(
                                                                    '<option value="">Transfer SN tag number</option>');
                                                            $.each(rs.data, function (ind, row) {
                                                                if (row.id !== user_id) {
                                                                    $('#transfter_id').append('<option value="' + row.id + '">' + row.sn_tag +
                                                                            '</option>');
                                                                }
                                                            });
                                                            // alert("inside model");
                                                            // $('#transfter_id').selectpicker('refresh');
                                                            $('#productTransfer').modal('show');
                                                        }
                                                    },
                                                    complete: function () {
                                                        $('#block').hide();
                                                    }
                                                });
                                            }

                                            function addTransfer() {
                                                var from_id = $('#p_user_id').val();
                                                var to_id = $('#transfter_id').val();
                                                var product_id = $('#product_id').val();
                                                $.ajax({
                                                    url: 'http://rayi.in/snsafe/dev/Product/productTransfer',
                                                    type: 'POST',
                                                    data: {
                                                        from_id: from_id,
                                                        to_id: to_id,
                                                        product_id: product_id
                                                    },
                                                    dataType: 'json',
                                                    beforeSend: function () {
                                                        $('#block').show();
                                                    },
                                                    success: function (rs) {
                                                        if (rs.status === true) {
                                                            $('#productTransfer').modal('hide');

                                                            // window.location.href = "product.html";
                                                            swal({
                                                                title: "Product!",
                                                                text: "Product transferred successfully",
                                                                type: "success"
                                                            }, function () {
                                                                window.location.href = "product.html";
                                                            });
                                                        }
                                                    },
                                                    error: function () {
                                                        swal({
                                                            title: 'Product',
                                                            text: 'Something error to transfer a product',
                                                            type: 'error'
                                                        });
                                                    },
                                                    complete: function () {
                                                        $('#block').hide();
                                                    }
                                                });
                                            }
                                            $('#user_id,#transfter_id').on('change', function () {
                                                $(this).valid();
                                            });
                                            //  $('#dateBought').datatimepicker.change(function(){
                                            //    $(this).valid();
                                            //  });
                                            $('#sel_p_group').change(function () {
                                                if ($(this).val() === "new_grp") {
                                                    $('.hideme').show();
                                                    $(this).valid();
                                                    $('#productGroup').focus();
                                                } else {
                                                    $('.hideme').hide();
                                                }
                                            }).change();

                                            function getProductgroup() {
                                                $('#sel_p_group').empty().html(
                                                        '<option value="">Select group</option><option value="new_grp">New group</option>');
                                                $.ajax({
                                                    url: 'http://rayi.in/snsafe/dev/product/getproductGroup',
                                                    type: 'GET',
                                                    dataType: 'json',
                                                    headers: {
                                                        // 'X-Auth-Token': 'c4ceef18-7247-9666-852b-9278fdc21bbc'
                                                    },
                                                    success: function (rs) {
                                                        $.each(rs, function (ind, row) {
                                                            $('#sel_p_group').append('<option value="' + row.id + '">' + row.group_name +
                                                                    '</option>');
                                                        });
                                                        // $('#sel_p_group').selectpicker('refresh');
                                                    }

                                                });
                                            }

                                            function printFunction(receipt) {

                                                var mywindow = window.open(receipt, '_blank');
                                                mywindow.window.print();
                                            }
                                            $('#productdesForm').validate({
                                                rules: {
                                                    reward: {
                                                        number: true
                                                    }
                                                },
                                                highlight: function (input) {
                                                    $(input).parents('.form-line').addClass('error');
                                                },
                                                unhighlight: function (input) {
                                                    $(input).parents('.form-line').removeClass('error');
                                                },
                                                errorPlacement: function (error, element) {
                                                    $(element).parents('.form-group').append(error);
                                                },
                                                messages: {
                                                    reward: {
                                                        number: 'Provide number only'
                                                    }
                                                }
                                            });

                                            function getUserData() {

                                                $.ajax({
                                                    url: 'http://rayi.in/snsafe/dev/mobileapi/Mobile/getSession',
                                                    type: 'POST',
                                                    dataType: 'json',
                                                    success: function (rs) {

                                                        $('#ses_name').html(rs.username);
                                                        $('#ses_mail').html(rs.email);
                                                        //alert(rs.id);
                                                        var usertype = rs.user_type;
                                                        if (usertype === 'customer') {
                                                            // alert("am a customer");
                                                            // alert(rs.id);

                                                            $('.admin').empty();
                                                            $('#user_id').val(rs.id);
                                                            $('#v_user_id').val(rs.id);
                                                            $('#usernav').hide();
                                                            // $('#user_id').prop('type', 'hidden');

                                                        } else {
                                                            $('.customer').empty();
                                                            $('#shopnav').hide();
                                                            // alert("am a admin");
                                                        }
                                                    },
                                                    error: function () {
                                                        alert("Please login");
                                                        window.location.href = "index.html";
                                                    }
                                                });
                                            }

                                            function logout() {

                                                $.ajax({
                                                    type: "POST",
                                                    url: "http://rayi.in/snsafe/dev/mobileapi/Mobile/logout",
                                                    dataType: 'json',
                                                    complete: function () {
                                                        window.location.href = "index.html";
                                                    }
                                                });
                                            }
                                            $('#Addvideo').click(function () {
                                                $('#videoModal').modal('show');
                                            });
                                            $('#quickadd').click(function () {
                                                $('#quickadd').val('quickadd');
                                                // $('#verify_product').val('1');
                                                $('#defaultModalLabel').html('Quick Add Product');
                                                $('#defaultModal').modal('show');
                                                $('.q').addClass('hide');
                                                $('.camera').removeClass('hide');
                                                $('.keyword').removeClass('hide');
                                                //$('.p_img').hide();
                                                //$('.camera').hide();
                                                var vali = $('#productForm').validate();
                                                vali.resetForm(); //Form all field validation reset
                                                $('#UploadImgs,#UploadImg').empty();
                                                $('#productForm')[0].reset();



                                            });

                                            function quickadd() {

                                                $('#verify_product').val('0');
                                                //$('#UploadImgs').empty();
                                                var formdata = new FormData($('#productForm')[0]);
                                                formdata.append('camera', images);

                                                getProductgroup();
                                                $.ajax({
                                                    url: 'http://rayi.in/snsafe/dev/mobileapi/product/addProductDraft',
                                                    type: "POST",
                                                    data: formdata,
                                                    contentType: false,
                                                    processData: false,
                                                    dataType: "JSON",
                                                    beforeSend: function () {
                                                        $('#block').show();
                                                        $('#submitProduct').prop('disabled', true);
                                                    },
                                                    success: function (rs) {
                                                        if (rs.status === true) {
                                                            $('#productForm')[0].reset();
                                                            $('#submitProduct').prop('disabled', false);
                                                            $('#defaultModal').modal('hide');
                                                            //ajax_dataTable_reload();
                                                            //table.ajax.reload();
                                                            //swal('Product added successfully', '', 'success');
                                                            //window.location.href = "product.html";
                                                            swal({
                                                                title: "Product added successfully!",
                                                                text: "Check your Product Draft",
                                                                type: "success"
                                                            }, function () {
                                                                window.location.href = "product.html";
                                                            });
                                                        }
                                                    },
                                                    error: function () {
                                                        swal('Add product', 'Error an add product', 'error');
                                                    },
                                                    complete: function () {
                                                        $('#block').hide();
                                                        $('#submitProduct').prop('disabled', false);
                                                    }
                                                });
                                            }
                                            $('#submitvideo').click(function () {
                                                var formdata = new FormData($('#videoForm')[0]);
                                                $.ajax({
                                                    url: 'http://rayi.in/snsafe/dev/mobileapi/product/addProductDraftVideo',
                                                    type: "POST",
                                                    data: formdata,
                                                    contentType: false,
                                                    processData: false,
                                                    dataType: "JSON",
                                                    beforeSend: function () {
                                                        $('#block').show();
                                                        $('#submitvideo').prop('disabled', true);
                                                    },
                                                    success: function (rs) {
                                                        if (rs.status === true) {
                                                            $('#videoForm')[0].reset();
                                                            $('#submitvideo').prop('disabled', false);
                                                            $('#videoModal').modal('hide');
                                                            //ajax_dataTable_reload();
                                                            //table.ajax.reload();
                                                            // swal('Product added successfully', '', 'success');
                                                            // window.location.href = "product.html";
                                                            swal({
                                                                title: "Product added successfully!",
                                                                text: "",
                                                                type: "success"
                                                            }, function () {
                                                                window.location.href = "product.html";
                                                            });
                                                        }
                                                    },
                                                    error: function () {
                                                        swal('Add video', 'Error an add product', 'error');
                                                    },
                                                    complete: function () {
                                                        $('#block').hide();
                                                        $('#submitvideo').prop('disabled', false);
                                                    }
                                                });

                                            });
                                            $('.upload_file').click(function () {
                                                $('.icon_upload').show();
                                                //$('.camera').hide();

                                            });
                                            $('.take_pic').click(function () {
                                                $('.camera').show();
                                                //$('.icon_upload').hide();
                                            });
                                            $('#userFiles').on('change', function () {
                                                $('#submitProduct').prop('enabled', true);
                                                $('#submitProduct').prop('disabled', false);
                                            });
                                      

        </script>

    </body>

</html>