<!DOCTYPE html>
<html lang="en">

    <head>
        <title>snsafe home screen</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="asset/materialize-css/css/materialize.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="asset/css/style.css">
        <link rel="stylesheet" href="asset/css/sweetalert.css">
        <style>
            .img-wrap {
                margin: 50px auto 30px auto;
            }

            .signup-form input {
                /* color: #fff !important; */
            }

            html {
                color: #fff !important;
            }

            input[type=text].valid {
                box-shadow: none;
            }

            select {
                background: transparent !important;
            }
            .col.s8.offset-s4 {
                display: -webkit-box;
                display: -ms-flexbox;
                display: flex;
                -webkit-box-pack: center;
                -ms-flex-pack: center;
                justify-content: center;
            }
            .btn {
                text-transform: none !important;
            }
            .row{
                margin-bottom:20px !important; 
            }
            button#submitProduct {
                width: 100%;
            }
        </style>
    </head>

    <body>
        <div class="upperDiv">
            <div class="row">
                <div class="col s6 offset-s3 img-wrap">
                    <img class="responsive-img logo-img" src="asset/images/logo.png">
                </div>
            </div>
            <div class="btn-wrap">
                <div class="row">
                    <div class="col s6 sin">
                        <button class="waves-effect waves-light sisu-btn btn sn-btn">Sign In</button>
                    </div>
                    <div class="col s6 sin">
                        <button class="waves-effect waves-light sisu-btn btn sp-btn">Sign Up</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-wrap">
            <div class="toggle-wrapper">
                <div class="content">
                    <div class="signin-form">
                        <div class="row">
                            <div class="col s12">
                                <form id="sign_in" method="POST" autocomplete="off">
                                    <div class="row">
                                        <div class="input-field col s12">
                                            <i class="material-icons prefix">account_circle</i>
                                            <input id="txtusername" name="txtusername" type="text" class="validate">
                                            <label for="txtusername">Email</label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="input-field col s12">
                                            <i class="material-icons prefix">lock</i>
                                            <input id="txtpassword" name="txtpassword" type="password" class="validate">
                                            <label for="txtpassword">Password</label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="input-field col s10 offset-s1">
                                            <a class="waves-effect waves-light btn sign-btn">Sign In</a>
                                        </div>
                                    </div>
                                </form>
<!--                                <div class="col s8 offset-s4">
                                    <div class="text-wrap">
                                        <a>Forgot Password ?</a>
                                        <p>Or Login with</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col s6 offset-s4">
                                        <div class="scl-btn-wrap">
                                            <ul>
                                                <li>
                                                    <a class="waves-effect waves-light btn-floating social google">
                                                        <i class="fa fa-google"></i> Sign in with google</a>
                                                </li>
                                                <li>
                                                    <a class="waves-effect waves-light btn-floating social facebook">
                                                        <i class="fa fa-facebook"></i> Sign in with facebook</a>

                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--        <div class="form-wrap">
                    <div class="toggle-wrapper">
                        <div class="content">
                            <div class="signup-form">
                                <div class="row">
                                    <div class="col s12">-->
        <form id="signupForm" autocomplete="off" class="signup-form">
            <!--                                    <input type="hidden" value="" id="id" name="id"/> 
                                                <input type="hidden" value="" id="updateV" name="updateV"/>
                                                <?php
                                                if ($uri !== 'Profile'):
                                                ?>-->
            <!--
                                                <div class="modal-header">
                                                    <h4 class="modal-title" id="defaultModalLabel">Sign up</h4>
                                                </div>
                                                <br>
                                                <?php
                                                endif;
                                                ?>-->
            <div class="modal-body">
                <div class="row">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">person</i>
                        <input type="text" name="fname" id="fname" class="form-control validate">
                        <label>First Name</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">person</i>
                        <input type="text" name="lname" id="lname" class="form-control validate">
                        <label>Last Name</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">person</i>
                        <i class="material-icons prefix">date_range</i>
                        <input id="txtdob" type="text" class="datepicker form-control validate">
                        <label for="txtdob">DOB</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">account_circle</i>
                        <input type="text" name="username" id="username" class="form-control validate">
                        <label>Username *</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">lock</i>
                        <input type="password" name="password" id="password" class="form-control validate">
                        <label>Password *</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group input-field col s12">
                        <input name="gender" type="radio" class="with-gap" id="male" value="male" />
                        <label for="male">Male</label>
                        <input name="gender" type="radio" id="female" class="with-gap" value="female" />
                        <label for="female">Female</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">email</i>
                        <input type="text" name="emailid" id="emailid" class="form-control validate">
                        <label>Email Id *</label>
                        <p id="mailErr"></p>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">call</i>
                        <input type="text" name="phone" id="phone" class="form-control validate">
                        <label>Telephone</label>
                    </div>
                </div>
                <div class="row">

                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">phone_iphone</i><input type="text" name="mobile" id="mobile" class="form-control validate">
                        <label>Mobile *</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">perm_contact_calendar</i>
                        <input type="text" id="address" name="address" class=" form-control validate">
                        <label>Address</label>
                    </div>
                </div>


                <div class="row">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">place</i>
                        <input type="text" name="zipcode" id="zipcode" class="form-control validate">
                        <label>Zipcode *</label>
                    </div>
                </div>


                <div class="row">
                    <div class="input-field col s12">
                        <select id="country" name="country" onchange="getState(this.value);" class="browser-default">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Option 1</option>
                            <option value="2">Option 2</option>
                            <option value="3">Option 3</option>
                        </select>
                        <!--<label>Country *</label>-->
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <select id="state" name="state" class="browser-default">
                            <option value="">Select State *</option>
                        </select>
                        <!--<label>State *</label>-->
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <select id="language" name="language" class="browser-default">
                            <option>Select language</option>
                            <option value="Danish">Danish</option>
                            <option value="English">English</option>
                            <option value="German">German</option>
                            <option value="French">French</option>
                        </select>
                        <!--<label>State *</label>-->
                    </div>
                </div>

                <div class="row">
                    <div class="form-group input-field col s12 setFocus">
                        <i class="material-icons prefix">person</i>
                        <input type="text" name="sntag" id="sntag" class="form-control validate" readonly>
                        <label class="active">Sn tag</label>
                    </div>
                </div>
                <div class="row hide">
                    <div class="form-group input-field col s12">
                        <i class="material-icons prefix">call</i>
                        <input type="text" name="dnatag" id="dnatag" class="form-control">
                        <label>DNA Tag</label>
                    </div>


                </div>
                <div class="row">
                    <div class="input-field col s10 offset-s1">
                        <button type="submit" id="submitProduct" class="waves-effect waves-light btn">Sign Up</button>
                    </div>
                </div>
            </div>
        </form>
        <!--                            </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>-->
    </div>
    <script type="text/javascript" src="asset/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="asset/materialize-css/js/materialize.min.js"></script>
    <script type="text/javascript" src="asset/bootstrap/js/bootstrap.min.js"></script>
    <!-- Jquery data table plugin-->
    <!--        <script type="text/javascript" src="asset/plugins/jquery-datatable/jquery.dataTables.js"></script>
            <script type="text/javascript" src="asset/plugins/jquery-datatable/skin/bootstrap/js/dataTables.bootstrap.js"></script>
            <script type="text/javascript" src="asset/js/dataTables.responsive.js"></script>-->
    <script type="text/javascript" src="asset/js/jquery_validation.js"></script>
    <script type="text/javascript" src="asset/js/sweet_alert.min.js"></script>
    <script type="text/javascript" src="asset/js/sweetalert_dev.js"></script>
    <script>
                            $(document).ready(function () {
                                $('.signup-form').hide();
                                $('.sn-btn').addClass('sn-active');
                                $('.sp-btn').click(function () {
                                    $('.sn-btn').removeClass('sn-active');
                                    $('.signin-form').hide();
                                    $('.sp-btn').addClass('sn-active');
                                    $('.signup-form').fadeIn();
                                });
                                $('.sn-btn').click(function () {
                                    $('.sp-btn').removeClass('sn-active');
                                    $('.signup-form').fadeOut();
                                    $('.sn-btn').addClass('sn-active');
                                    $('.signin-form').fadeIn();
                                    // $(".signin-form").click(function () {
                                    // $(".signup-form").slideToggle();
                                });
                                

                                $('#AddUser').click(function () {
                                    $('#username').attr('readonly', false);
                                    // $('#signupForm')[0].reset();
                                    // $('#signupForm').validate().resetForm();
                                    $('#id').val('');
                                    $('#updateV').val('');
                                    // checkInput();
                                    $('#signupModal').modal('show');
                                    // $('#country,#state,#language').selectpicker('refresh');
                                    $("#signupModal").on('shown.bs.modal', function () {
                                        $(this).find('#fname').focus();
                                    });
                                    $(".error").removeClass("error");
                                });
//                                                    table = $('#table').DataTable({
//                                                        dom: '<"pull-left"f><"pull-right"l>trip',
//                                                        responsive: true,
//                                                        processing: true,
//                                                        serverSide: true,
//                                                        order: [],
//                                                        info: false,
//                                                        lengthChange: false,
//                                                        ajax: {
//                                                            url: "http://rayi.in/snsafe/dev/User/getUser",
//                                                            type: "POST"
//                                                        }
//                                                    });
                                $("signupForm").attr('autocomplete', 'off');
                                //$.datetimepicker.setLocale('en');
                                $('.glyphicon-calendar').click(function () {
                                    //alert('clicked');
                                    $('#dob').pickadate('show');
                                });
                                $('#dob').pickadate({
                                    autoclose: true,
                                    format: 'd-m-Y',
                                    mask: '39-19-9999',
                                    timepicker: false,
                                    // mask:true,
                                    maxDate: 0,
                                    noSpinbtn: true,
                                    scrollMonth: false,
                                    scrollInput: false

                                });
                                // $('#language').selectpicker('refresh');
                                // autosize($('textarea.auto-growth'));
                                getCountry();
//            if (uri === 'Profile') {
//            edit_user('<?php echo $this->logged_id; ?>', 'admin');
//            $('#submitProduct').attr("disabled", true);
//            }
                                $('#country').on('change', function () {
                                    var update = $('#updateV').val();
                                    if (update != 'update') {
                                        var fName = $('#fname').val();
                                        var sName = $('#lname').val();
                                        var id = $(this).val();
                                        var checkName = fName.substring(0, 1) + sName.substring(0, 1);
                                        $.ajax({
                                            url: 'http://rayi.in/snsafe/dev/General/checkSnTag/',
                                            type: 'POST',
                                            data: {country_id: id, tagname: checkName},
                                            dataType: 'json',
                                            success: function (rs) {
                                                if (rs.status === true) {
                                                    $('#sntag').empty().val(rs.data)
                                                            .parent().addClass('focused');
                                                } else {
                                                    swal({
                                                        title: 'Sn tag',
                                                        text: 'error generating sn tag',
                                                        type: 'error'
                                                    });
                                                }
                                            }
                                        });
                                    }
                                });
                                $("#emailid").keyup(function () {
                                    if ($(this).val() !== '') {
                                        $.ajax({
                                            type: "POST",
                                            url: "http://rayi.in/snsafe/dev/Login/checkEmail/",
                                            data: {email: $(this).val()},
                                            dataType: 'json',
                                            success: function (obj) {
                                                if (obj.status === true) {
                                                    $('#mailErr').empty().html('Email id already Exist');
                                                    $('#mailErr').css({
                                                        'color': '#F44336', 'font-size': '12px', 'font-weight': 'normal'
                                                    });
                                                    $('#submitProduct').attr("disabled", true);
                                                } else {
                                                    $('#mailErr').empty().html('');
                                                    $('#mailErr').css({
                                                        'color': '#4CAF50'
                                                    });
                                                    $('#submitProduct').attr("disabled", false);
                                                }
                                            }
                                        });
                                    }
                                });
                                $('#username').keyup(function () {
                                    if ($(this).val() !== '') {
                                        $.ajax({
                                            url: 'http://rayi.in/snsafe/dev/General/checkUsername/' + $(this).val(),
                                            method: 'POST',
                                            dataType: 'json',
                                            success: function (rs) {
                                                if (rs.status === true) {
                                                    $('#userErr').empty().html('User already exist');
                                                    $('#userErr').css({
                                                        'color': '#F44336', 'font-size': '12px', 'font-weight': 'normal'
                                                    });
                                                    $('#submitProduct').attr("disabled", true);
                                                } else {
                                                    $('#userErr').empty().html('');
                                                    $('#userErr').css({
                                                        'color': '#4CAF50'
                                                    });
                                                    $(this).removeClass('error');
                                                    $('#submitProduct').attr("disabled", false);
                                                }
                                            }
                                        });
                                    } else {
                                        $('#userErr').empty().html('');
                                        $('#userErr').css({
                                            'color': '#4CAF50'
                                        });
                                        $(this).removeClass('error');
                                        $('#submitProduct').attr("disabled", false);
                                    }
                                });
                            });
//                                                $(document).ready(function () {
//                                                    $('.signup-form').hide();
//                                                    $('.sn-btn').addClass('sn-active');
//                                                    $('.sp-btn').click(function () {
//                                                        $('.sn-btn').removeClass('sn-active');
//                                                        $('.signin-form').hide();
//                                                        $('.sp-btn').addClass('sn-active');
//                                                        $('.signup-form').fadeIn();
//                                                    });
//                                                    $('.sn-btn').click(function () {
//                                                        $('.sp-btn').removeClass('sn-active');
//                                                        $('.signup-form').fadeOut();
//                                                        $('.sn-btn').addClass('sn-active');
//                                                        $('.signin-form').fadeIn();
//                                                        // $(".signin-form").click(function () {
//                                                        // $(".signup-form").slideToggle();
//                                                    });
//                                                });
                            $('.signin-form').click(function () {


                                // $('.signin-form').show();
                                //$('.signup-form').hide();
                                $('.signin-form').css('display', 'block');
                                $('#signupForm').css('display', 'none');


                            });
                            $('signup-form').click(function () {


                                // $('.signin-form').hide();
                                // $('.signup-form').show();
                                $('.signin-form').css('display', 'none');
                                $('signup-form').css('display', 'block');


                            });

                            /*-------datepicker-----*/
                            $('.datepicker').pickadate({
                                selectMonths: true, // Creates a dropdown to control month
                                selectYears: 200, // Creates a dropdown of 15 years to control year,
                                futureDate: false,
                                today: 'Today',
                                clear: 'Clear',
                                close: 'Ok',
                                max: true,
                                closeOnSelect: false // Close upon selecting a date,
                            });

                            /*------ajax request ----*/

                            $('.sign-btn').click(function () {
                                var formValue = new FormData($('#sign_in')[0]);
                                console.log(formValue);
                                $.ajax({
                                    url: 'http://rayi.in/snsafe/dev/Login/signIn',
                                    type: "POST",
                                    data: formValue,
                                    contentType: false,
                                    processData: false,
                                    dataType: "json",
                                    success: function (rs) {
                                        if (rs.status === true) {
                                            Materialize.toast('Login Success!', 4000);
                                            //$('#sign_in')[0].reset();
                                            //$('#signinModal').modal('hide');
                                            window.location.href = "product.html";
                                        } else {
                                            Materialize.toast('Invalid Username or Password', 4000);
                                        }
                                    },
                                    error: function (msg) {
                                        Materialize.toast(msg, 4000);
                                    }

                                });
                            });
                            $('#signupForm').validate({
                                rules: {
                                    fname: {
                                        required: true
                                    },
                                    lname: {
                                        required: true
                                    },
                                    zipcode: {
                                        required: true,
                                        number: true
                                    },
                                    mobile: {
                                        required: true,
                                        number: true
                                    },
                                    phone: {
                                        number: true
                                    },
                                    username: {
                                        required: true
                                                //  alphanumeric: true
                                    },
                                    emailid: {
                                        required: {
                                            depends: function () {
                                                $(this).val($.trim($(this).val()));
                                                return true;
                                            }
                                        },
                                        email: true
                                    },
                                    password: {
                                        required: {
                                            depends: function () {
                                                $(this).val($.trim($(this).val()));
                                                return true;
                                            }
                                        }
                                    },
                                    country: {
                                        required: true
                                    },
                                    state: {
                                        required: true
                                    }
                                },
                                highlight: function (input) {
                                    $(input).parents('.validate').addClass('error');
                                },
                                unhighlight: function (input) {
                                    $(input).parents('.validate').removeClass('error');
                                    $('select').parents('.validate').removeClass('error');
                                },
                                errorPlacement: function (error, element) {
                                    $(element).parents('.row').append(error);
                                },
                                messages: {
                                    fname: {
                                        required: 'enter first name'
                                    },
                                    lname: {
                                        required: 'enter last name'
                                    },
                                    zipcode: {
                                        required: 'enter zipcode',
                                        number: 'provide num only'
                                    },
                                    mobile: {
                                        required: 'enter mobile',
                                        number: 'provide num only'
                                    },
                                    phone: {
                                        number: 'provide num only'
                                    },
                                    username: {
                                        required: 'enter username'
                                                //                alphanumeric:'<?php echo $this->lang->line('alpha_numeric'); ?>'
                                    },
                                    emailid: {
                                        required: 'enter email',
                                        email: 'ivalid email'
                                    },
                                    password: {
                                        required: 'enter password'
                                    },
                                    country: {
                                        required: 'select country'
                                    },
                                    state: {
                                        required: 'select state'
                                    }
                                },
                                submitHandler: function () {
                                    if ($('#updateV').val() === 'update') {
                                        update();
                                    } else {
                                        addUser();
                                    }

                                }
                            });
                            function getCountry() {
                                $.ajax({
                                    url: 'http://rayi.in/snsafe/dev/General/getCountry',
                                    type: 'GET',
                                    dataType: 'json',
                                    success: function (rs) {
                                        if (rs.status === true) {
                                            $('#country').empty().html('<option value="">select country</option>');
                                            $.each(rs.data, function (ind, row) {
                                                $('#country').append('<option value="' + row.id + '">' + row.name + '</option>');
                                            });
                                            // $('#country').pickadate('refresh');
                                        }
                                    }
                                });
                            }
                            function getState(id) {
                                if (id > 0) {
                                    $.ajax({
                                        url: 'http://rayi.in/snsafe/dev/General/getState/' + id,
                                        type: 'GET',
                                        dataType: 'json',
                                        success: function (rs) {
                                            if (rs.status === true) {
                                                $('#state').empty().html('select state</option>');
                                                $.each(rs.data, function (ind, row) {
                                                    $('#state').append('<option value="' + row.id + '">' + row.name + '</option>');
                                                });
                                                // $('#state').pickadate("refresh");
                                            }
                                        }
                                    });
                                }
                            }
                            //Profile insert
                            function addUser() {

                                var formValue = new FormData($('#signupForm')[0]);
                                $.ajax({
                                    url: 'http://rayi.in/snsafe/dev/Login/signUp',
                                    type: "POST",
                                    data: formValue,
                                    contentType: false,
                                    processData: false,
                                    dataType: "json",
                                    beforeSend: function () {
                                        $('#block').show();
                                        $('#submitProduct').attr("disabled", true);
                                    },
                                    success: function (rs)
                                    {
                                        if (rs.status === true) {
                                            $('#signupForm')[0].reset();
                                            $('#signupModal').modal('hide');
//                                                            if (uri !== 'Profile' && uType === 'admin') {
//                                                                table.ajax.reload();
//                                                            }
                                            swal('registered successfully', '', 'success');
                                            window.location.href = "signin.html";

                                        }
                                    },
                                    error: function () {
                                        swal('rigister', 'error caused on register a data', 'error');
                                    },
                                    complete: function () {
                                        $('#block').hide();
                                        $('#submitProduct').attr("disabled", false);
                                    }
                                });
                            }

                            /*----Toast-----*/

                            

    </script>
</body>

</html>

</body>

</html>